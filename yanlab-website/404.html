<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title></title>
    <script>
      // Compute a friendly title early in the head so the browser tab
      // shows the route-specific title immediately instead of a generic
      // "Yan Lab" that would flash briefly.
      (function(){
        try {
          var routeTitles = {
            '/': 'Yan Lab',
            '/home': 'Yan Lab',
            '/home/': 'Yan Lab',
            '/contact': 'Contacts - Yan Lab',
            '/contact/': 'Contacts - Yan Lab',
            '/publications': 'Publications - Yan Lab',
            '/publications/': 'Publications - Yan Lab',
            '/people': 'People - Yan Lab',
            '/people/': 'People - Yan Lab',
            '/our-team': 'Our Team - Yan Lab',
            '/our-team/': 'Our Team - Yan Lab',
            '/team/our-team': 'Our Team - Yan Lab',
            '/team/our-team/': 'Our Team - Yan Lab',
            '/piyan': 'PI Yan - Yan Lab',
            '/piyan/': 'PI Yan - Yan Lab',
            '/team/pi-yan': 'PI Yan - Yan Lab',
            '/team/pi-yan/': 'PI Yan - Yan Lab',
            '/ourteam': 'Our Team - Yan Lab',
            '/ourteam/': 'Our Team - Yan Lab',
            '/research': 'Research - Yan Lab',
            '/research/': 'Research - Yan Lab',
            '/resources': 'Resources - Yan Lab',
            '/resources/': 'Resources - Yan Lab',
            '/news': 'News - Yan Lab',
            '/news/': 'News - Yan Lab'
          };
          function deriveTitleFromPath(path) {
            var p = path.replace(/^\/+|\/+$/g, '');
            if (!p) return null;
            var parts = p.split('/');
            var last = parts[parts.length - 1];
            var words = last.replace(/[-_]/g, ' ').split(' ');
            for (var i = 0; i < words.length; i++) {
              words[i] = words[i].charAt(0).toUpperCase() + words[i].slice(1);
            }
            return words.join(' ') + ' - Yan Lab';
          }
          var t = routeTitles[location.pathname] || deriveTitleFromPath(location.pathname) || 'Yan Lab';
          document.title = t;
        } catch (e) {}
      })();
    </script>
  </head>
  <body>
    <script>
      // Fallback served by GitHub Pages when pretty URLs are requested directly.
      // Show a minimal, route-specific placeholder (helps title and visible heading)
      // while we fetch the SPA shell so users don't see "404 Not Found".
      (function () {
        var url = location.pathname + location.search + location.hash;

        // Attempt to derive a friendly title for common pretty routes.
        // If a specific mapping exists, use it; otherwise derive from the path.
        var routeTitles = {
          '/': 'Yan Lab',
          '/home': 'Yan Lab',
          '/home/': 'Yan Lab',
          '/contact': 'Contacts - Yan Lab',
          '/contact/': 'Contacts - Yan Lab',
          '/publications': 'Publications - Yan Lab',
          '/publications/': 'Publications - Yan Lab',
          '/people': 'People - Yan Lab',
          '/people/': 'People - Yan Lab',
          '/our-team': 'Our Team - Yan Lab',
          '/ourteam': 'Our Team - Yan Lab',
          '/ourteam/': 'Our Team - Yan Lab',
          '/research': 'Research - Yan Lab',
          '/research/': 'Research - Yan Lab',
          '/resources': 'Resources - Yan Lab',
          '/resources/': 'Resources - Yan Lab',
          '/news': 'News - Yan Lab',
          '/news/': 'News - Yan Lab',
          '/piyan': 'PI Yan - Yan Lab',
          '/piyan/': 'PI Yan - Yan Lab'
        };

        function deriveTitleFromPath(path) {
          // Remove leading/trailing slashes and split
          var p = path.replace(/^\/+|\/+$/g, '');
          if (!p) return null;
          // For multi-segment paths, take the last segment
          var parts = p.split('/');
          var last = parts[parts.length - 1];
          // Convert hyphens/underscores to spaces and title-case words
          var words = last.replace(/[-_]/g, ' ').split(' ');
          for (var i = 0; i < words.length; i++) {
            words[i] = words[i].charAt(0).toUpperCase() + words[i].slice(1);
          }
          return words.join(' ') + ' - Yan Lab';
        }

        // Set a neutral title immediately to avoid a visible "404" flash,
        // then prefer a derived route title if available.
        try { document.title = 'Yan Lab'; } catch (e) {}
        var initialTitle = routeTitles[location.pathname] || deriveTitleFromPath(location.pathname);
        if (initialTitle) {
          document.title = initialTitle;
          // show a quick placeholder so the user sees the page title on load
          document.body.innerHTML = '<h1 style="font-family:Inter, Arial, sans-serif; text-align:center; margin-top:2rem">' + initialTitle + '</h1>';
        }

        // Then attempt to load the SPA shell and let client-side routing take over.
        fetch('/index.html').then(function (r) { return r.text(); }).then(function (html) {
          document.open();
          document.write(html);
          history.replaceState({}, '', url);
          document.close();
        }).catch(function () {
          if (!initialTitle) {
            document.body.innerHTML = '<h1>404: Not Found</h1><p>Could not load the application shell.</p>';
          }
        });
      })();
    </script>
  </body>
</html>
